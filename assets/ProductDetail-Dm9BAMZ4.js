import{j as e,F as A,P as I,u as P,a as C,b as T,c as F,s as W,p as R,r,q as D,f as E,g as k,h as S,i as _,k as q,l as L,m as $,n as B}from"./index-CHYNfWYa.js";import{u as G}from"./useGetProducts-ClGwtbQ3.js";function b({rating:i}){return e.jsx("div",{className:"flex flex-row gap-1 text-xl",children:Array.from({length:5},(d,a)=>e.jsx(A,{icon:"fa-solid fa-star",className:a<i?"text-yellow-500":"text-gray-400"},a))})}b.propTypes={rating:I.number.isRequired};function Y(){const{user:i,isLoggedIn:d}=P(),{addToast:a}=C(),x=T(),l=F();G();const o=W(),{productname:w}=R(),[s,v]=r.useState(null),[u,h]=r.useState(!1),[f,c]=r.useState(!1),[p,g]=r.useState(!1),[j,n]=r.useState(!1);r.useEffect(()=>{d&&o&&s&&(c(i.cart.some(t=>t===s._id)),n(i.wishlist.some(t=>t===s._id)))},[o,i,s]),r.useEffect(()=>{o&&v(o.filter(t=>t.name===w)[0])},[o]);const y=async()=>{if(!d){x("/E-Commerce/login");return}h(!0);const t=s._id;if(f)try{await E(t),l(k(t)),c(!1),a("Removed from cart.",!0)}catch{a("Failed to remove.",!1)}else try{await S(t),l(_(t)),c(!0),a("Added to cart.",!0)}catch{a("Failed to add.",!1)}h(!1)},N=async()=>{if(!d){x("/E-Commerce/login");return}g(!0);const t=s._id;if(j)try{await q(t),l(L(t)),n(!1),a("Removed from wishlist.",!0)}catch{a("Failed to remove.",!1)}else try{await $(t),l(B(t)),n(!0),a("Added to wishlist.",!0)}catch{a("Failed to add.",!1)}g(!1)};return e.jsx("div",{children:s?e.jsxs("div",{className:"flex flex-col lg:flex-row lg:gap-4 p-4",children:[e.jsx("div",{className:"mx-auto my-5 shadow-product-card-shadow w-fit p-10 rounded-xl overflow-hidden shrink-0 flex items-center justify-center",children:e.jsx("img",{src:s.image,alt:s.name,className:"block m-auto max-h-60"})}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-semibold mt-8",children:s.name}),e.jsx("div",{className:"mt-3",children:e.jsx(b,{rating:s.rating})}),e.jsxs("div",{className:"text-2xl font-semibold mt-8 flex flex-row flex-wrap items-center justify-between gap-2",children:[e.jsxs("p",{children:[e.jsxs("span",{children:["₹",s.originalPrice-s.originalPrice*(s.discountPercentage/100)]}),e.jsxs("span",{className:"font-normal line-through ml-4 text-slate-400",children:["₹",s.originalPrice]})]}),e.jsxs("span",{className:"text-green-600",children:[s.discountPercentage,"% OFF"]})]}),e.jsxs("div",{className:"flex flex-row flex-wrap w-full items-center justify-center gap-4 text-lg mt-5 pb-2 border-b border-slate-800",children:[e.jsx("button",{className:`flex-grow bg-slate-900 text-white hover:bg-white hover:text-slate-900 duration-300 py-3 px-1 border-2 border-slate-900 uppercase ${u?"opacity-50":"opacity-100"}`,onClick:y,disabled:u,children:f?"Remove From Cart":"Add To Cart"}),e.jsx("button",{className:`flex-grow bg-white text-slate-900 hover:bg-slate-900 hover:text-white duration-300 py-3 px-1 border-2 border-slate-900 uppercase ${p?"opacity-50":"opacity-100"}`,onClick:N,disabled:p,children:j?"Remove From Wishlist":"Add To Wishlist"})]}),e.jsxs("div",{className:"flex flex-col gap-2 text-sm sm:text-xl mt-4 mb-12",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Brand: "}),s.brand]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Description: "}),s.description]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Type: "}),s.category]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Added In Year: "}),s.yearAdded]})]})]})]}):e.jsx(D,{})})}export{Y as default};
