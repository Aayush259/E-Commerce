import{u as k,a as R,b as L,c as q,r as l,j as e,F as I,L as E,d as B,e as H,f as O,g as $,h as D,i as z,k as G,l as U,m as V,n as _,P as d,o as J,p as K,S,q as M}from"./index-CHYNfWYa.js";import{u as Q}from"./useGetProducts-ClGwtbQ3.js";function A({productDetails:o}){const{isLoggedIn:h}=k(),{addToast:a}=R(),m=L(),n=q(),v=B(),u=H(),i=o._id,N=o.image,g=o.name,p=o.rating,w=o.originalPrice,j=o.discountPercentage,C=w-w*(j/100),[b,s]=l.useState(!1),[r,t]=l.useState(v(i)),[c,x]=l.useState(!1),[y,f]=l.useState(u(i)),P=async()=>{if(!h){m("/E-Commerce/login");return}if(s(!0),r)try{await O(i),n($(i)),t(!1),a("Removed from cart.","success")}catch{a("Failed to remove.",!1)}else try{await D(i),n(z(i)),t(!0),a("Added to cart.",!0)}catch{a("Failed to add",!1)}s(!1)},W=async()=>{if(!h){m("/E-Commerce/login");return}if(x(!0),y)try{await G(i),n(U(i)),f(!1),a("Removed from wishlist.",!0)}catch{a("Failed to remove.",!1)}else try{await V(i),n(_(i)),f(!0),a("Added to wishlist.",!0)}catch{a("Failed to add.",!1)}x(!1)};return e.jsxs("div",{className:"relative p-4 mx-auto w-64 max-w-[70vw] rounded-2xl shadow-product-card-shadow hover:shadow-product-card-shadow-hover duration-300",children:[e.jsx("button",{className:`absolute top-0 right-0 m-2 ${c?"opacity-50":"opacity-100"}`,onClick:W,disabled:c,children:e.jsx(I,{icon:"fa-solid fa-heart",className:`
                        h-5
                        ${y?"text-red-600":"text-slate-400"}
                    `})}),e.jsxs(E,{to:`/E-Commerce/products/${g}`,children:[e.jsx("img",{src:N,alt:g,className:"block m-auto h-60"}),e.jsxs("div",{className:"flex flex-row items-start justify-between my-4",children:[e.jsx("p",{className:"font-semibold text-slate-900",children:g}),e.jsxs("div",{className:"bg-slate-900 p-1 text-white flex flex-row items-start justify-center gap-1 rounded-lg",children:[p,e.jsx(I,{icon:"fa-solid fa-star",className:"h-3"})]})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between mt-8",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-semibold text-slate-900",children:["₹",C]}),e.jsxs("span",{className:"ml-2 line-through text-slate-500 font-thin",children:["₹",w]})]}),e.jsxs("p",{className:"font-semibold text-green-600",children:[j,"% OFF"]})]})]}),e.jsx("button",{className:`bg-slate-900 border-2 border-slate-900 text-white w-full mt-4 rounded-md py-[6px] tracking-wider uppercase hover:text-slate-900 hover:bg-white duration-300 ${b?"opacity-50":"opacity-100"}`,onClick:P,disabled:b,children:r?"Remove From Cart":"Add To Cart"})]})}A.propTypes={productDetails:d.shape({image:d.string.isRequired,name:d.string.isRequired,rating:d.number.isRequired,originalPrice:d.number.isRequired,discountPercentage:d.number.isRequired}).isRequired};function T({setFilterCriteria:o,setSortPreference:h,setRatingsPreference:a}){const[m,n]=l.useState(!1),[v,u]=l.useState(["Wired","Noise Cancelling","Wireless","Speaker"]),i=()=>n(!0),N=s=>h(s.target.value),g=s=>a(Number(s.target.value)),p=s=>{const r=s.target.value;u(t=>s.target.checked?t.length>=4?[r]:[...t,r]:t.filter(c=>c!==r))},w=s=>{s.preventDefault(),n(!1),o(v)},j=()=>{n(!1),o([]),a("")},C=[{id:"highToLow",value:"highToLow",label:"High To Low"},{id:"lowToHigh",value:"lowToHigh",label:"Low To High"}],b=[{id:"wired",value:"Wired",label:"Wired"},{id:"noiseCancelling",value:"Noise Cancelling",label:"Noise Cancelling"},{id:"wireless",value:"Wireless",label:"Wireless"},{id:"speaker",value:"Speaker",label:"Speaker"}];return e.jsxs("section",{className:"w-[100vw] lg:w-[250px] max-w-full relative",children:[e.jsxs("button",{className:"flex flex-col items-center justify-center text-xl text-white bg-slate-900 p-3 w-full fixed bottom-0 z-20 lg:hidden",onClick:i,children:[e.jsx(I,{icon:"fa-solid fa-angle-up",className:"h-6"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("form",{className:`${m?"":"hidden"} w-[100vw] lg:block lg:w-[250px] max-w-full pb-24 h-[100vh] overflow-y-auto lg:border-r-2 lg:border-slate-900 fixed z-[25] bg-white`,children:[e.jsxs("div",{className:"flex flex-row items-center justify-between p-4 border-b border-slate-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Filters"}),e.jsx("button",{type:"reset",className:"italic underline bg-slate-200 p-2 rounded-lg sm:hover:opacity-65",onClick:j,children:"Clear"})]}),e.jsxs("div",{className:"px-4 my-10 md:my-4",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Price"}),e.jsx("div",{className:"flex flex-col gap-2 mt-3",children:C.map(({id:s,value:r,label:t})=>e.jsxs("label",{htmlFor:s,className:"flex flex-row items-center justify-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"priceFilter",id:s,value:r,onChange:N})," ",t]},s))})]}),e.jsxs("div",{className:"px-4 my-10 md:my-4",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Categories"}),e.jsx("div",{className:"flex flex-col gap-2 mt-3",children:b.map(({id:s,value:r,label:t})=>e.jsxs("label",{htmlFor:s,className:"flex flex-row items-center justify-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"category",id:s,value:r,onChange:p})," ",t]},s))})]}),e.jsxs("div",{className:"px-4 my-10 md:my-4",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Ratings"}),e.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[e.jsx("div",{className:"flex justify-between mb-2",children:[1,2,3,4,5].map(s=>e.jsx("span",{className:"text-sm font-medium",children:s},s))}),e.jsx("label",{htmlFor:"rating",className:"flex flex-row items-center justify-start gap-2 cursor-pointer",children:e.jsx("input",{type:"range",name:"rating",id:"rating",defaultValue:1,step:1,min:1,max:5,className:"w-full max-w-sm",onChange:g})})]})]}),e.jsx("button",{type:"submit",className:"block bg-slate-900 text-white px-3 py-2 rounded-lg ml-4 text-xl tracking-wider",onClick:w,children:"Apply"})]})]})}T.propTypes={setFilterCriteria:d.func.isRequired,setSortPreference:d.func.isRequired,setRatingsPreference:d.func.isRequired};function X(){Q();const{value:o,status:h}=J(s=>s.product),{categoryname:a,productname:m}=K(),[n,v]=l.useState([]),[u,i]=l.useState(["Wired","Noise Cancelling","Wireless","Speaker"]);l.useEffect(()=>{u.length<=0&&i(["Wired","Noise Cancelling","Wireless","Speaker"])},[u]);const[N,g]=l.useState(!1),[p,w]=l.useState(""),[j,C]=l.useState(0),b=s=>{i(s),g(!0)};return l.useEffect(()=>{let s;N?s=u:s=a?[a]:["Wired","Noise Cancelling","Wireless","Speaker"];let r=o.filter(t=>s.includes(t.category));r=r.filter(t=>t.rating>=j),m&&(r=r.filter(t=>t.name.toLowerCase().includes(m.toLowerCase()))),p==="lowToHigh"?r=r.sort((t,c)=>{const x=t.originalPrice,y=x-x*(t.discountPercentage/100),f=c.originalPrice,P=f-f*(c.discountPercentage/100);return y-P}):p==="highToLow"&&(r=r.sort((t,c)=>{const x=t.originalPrice,y=x-x*(t.discountPercentage/100),f=c.originalPrice;return f-f*(c.discountPercentage/100)-y})),v(r)},[a,m,o,u,p,j]),h===S.LOADING?e.jsx(M,{}):h===S.ERROR?e.jsx("p",{className:"text-xl md:text-3xl text-center my-8 text-red-500",children:"Something went wrong!!!"}):e.jsxs("div",{className:"flex flex-row flex-wrap justify-start items-start relative",children:[e.jsx(T,{setFilterCriteria:b,setSortPreference:w,setRatingsPreference:C}),e.jsx("div",{className:"flex flex-row justify-start items-center flex-wrap gap-4 mx-8 my-4 mb-24 lg:ml-72 lg:mr-64",children:n.length<=0?e.jsx("p",{className:"text-xl md:text-3xl text-center my-8",children:"No items found for that..."}):n.map(s=>e.jsx(A,{productDetails:s},s.name))})]})}function ee(){return e.jsx(X,{})}export{ee as default};
