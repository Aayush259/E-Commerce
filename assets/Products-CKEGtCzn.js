import{u as R,a as L,b as q,c as T,r as n,j as e,F as S,L as E,d as B,e as H,f as O,g as $,h as D,i as z,k as U,l as G,m as V,n as _,P as m,o as J,p as K,q as M,S as A,s as Q}from"./index-kcfJgbEy.js";function W({productDetails:l}){const{isLoggedIn:h}=R(),{addToast:o}=L(),u=q(),c=T(),w=B(),C=H(),a=l._id,j=l.image,g=l.name,P=l.rating,d=l.originalPrice,b=l.discountPercentage,y=d-d*(b/100),[v,s]=n.useState(!1),[t,r]=n.useState(w(a)),[i,x]=n.useState(!1),[f,N]=n.useState(C(a)),p=async()=>{if(!h){u("/E-Commerce/login");return}if(s(!0),t)try{await O(a),c($(a)),r(!1),o("Removed from cart.","success")}catch{o("Failed to remove.",!1)}else try{await D(a),c(z(a)),r(!0),o("Added to cart.",!0)}catch{o("Failed to add",!1)}s(!1)},F=async()=>{if(!h){u("/E-Commerce/login");return}if(x(!0),f)try{await U(a),c(G(a)),N(!1),o("Removed from wishlist.",!0)}catch{o("Failed to remove.",!1)}else try{await V(a),c(_(a)),N(!0),o("Added to wishlist.",!0)}catch{o("Failed to add.",!1)}x(!1)};return e.jsxs("div",{className:"relative p-4 mx-auto w-64 max-w-[70vw] rounded-2xl shadow-product-card-shadow hover:shadow-product-card-shadow-hover duration-300",children:[e.jsx("button",{className:`absolute top-0 right-0 m-2 ${i?"opacity-50":"opacity-100"}`,onClick:F,disabled:i,children:e.jsx(S,{icon:"fa-solid fa-heart",className:`
                        h-5
                        ${f?"text-red-600":"text-slate-400"}
                    `})}),e.jsxs(E,{to:`/E-Commerce/products/${g}`,children:[e.jsx("img",{src:j,alt:g,className:"block m-auto h-60"}),e.jsxs("div",{className:"flex flex-row items-start justify-between my-4",children:[e.jsx("p",{className:"font-semibold text-slate-900",children:g}),e.jsxs("div",{className:"bg-slate-900 p-1 text-white flex flex-row items-start justify-center gap-1 rounded-lg",children:[P,e.jsx(S,{icon:"fa-solid fa-star",className:"h-3"})]})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between mt-8",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-semibold text-slate-900",children:["₹",y]}),e.jsxs("span",{className:"ml-2 line-through text-slate-500 font-thin",children:["₹",d]})]}),e.jsxs("p",{className:"font-semibold text-green-600",children:[b,"% OFF"]})]})]}),e.jsx("button",{className:`bg-slate-900 border-2 border-slate-900 text-white w-full mt-4 rounded-md py-[6px] tracking-wider uppercase hover:text-slate-900 hover:bg-white duration-300 ${v?"opacity-50":"opacity-100"}`,onClick:p,disabled:v,children:t?"Remove From Cart":"Add To Cart"})]})}W.propTypes={productDetails:m.shape({image:m.string.isRequired,name:m.string.isRequired,rating:m.number.isRequired,originalPrice:m.number.isRequired,discountPercentage:m.number.isRequired}).isRequired};function k({setFilterCriteria:l,setSortPreference:h,setRatingsPreference:o}){const[u,c]=n.useState(!1),[w,C]=n.useState(["Wired","Noise Cancelling","Wireless","Speaker"]),a=()=>c(!0),j=s=>h(s.target.value),g=s=>o(Number(s.target.value)),P=s=>{const t=s.target.value;C(r=>s.target.checked?r.length>=4?[t]:[...r,t]:r.filter(i=>i!==t))},d=s=>{s.preventDefault(),c(!1),l(w)},b=()=>{c(!1),l([]),o("")},y=[{id:"highToLow",value:"highToLow",label:"High To Low"},{id:"lowToHigh",value:"lowToHigh",label:"Low To High"}],v=[{id:"wired",value:"Wired",label:"Wired"},{id:"noiseCancelling",value:"Noise Cancelling",label:"Noise Cancelling"},{id:"wireless",value:"Wireless",label:"Wireless"},{id:"speaker",value:"Speaker",label:"Speaker"}];return e.jsxs("section",{className:"w-[100vw] lg:w-[250px] max-w-full relative",children:[e.jsxs("button",{className:"flex flex-col items-center justify-center text-xl text-white bg-slate-900 p-3 w-full fixed bottom-0 z-20 lg:hidden",onClick:a,children:[e.jsx(S,{icon:"fa-solid fa-angle-up",className:"h-6"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("form",{className:`${u?"":"hidden"} w-[100vw] lg:block lg:w-[250px] max-w-full pb-24 h-[100vh] overflow-y-auto lg:border-r-2 lg:border-slate-900 fixed z-[25] bg-white`,children:[e.jsxs("div",{className:"flex flex-row items-center justify-between p-4 border-b border-slate-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Filters"}),e.jsx("button",{type:"reset",className:"italic underline bg-slate-200 p-2 rounded-lg sm:hover:opacity-65",onClick:b,children:"Clear"})]}),e.jsxs("div",{className:"px-4 my-10 md:my-4",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Price"}),e.jsx("div",{className:"flex flex-col gap-2 mt-3",children:y.map(({id:s,value:t,label:r})=>e.jsxs("label",{htmlFor:s,className:"flex flex-row items-center justify-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"priceFilter",id:s,value:t,onChange:j})," ",r]},s))})]}),e.jsxs("div",{className:"px-4 my-10 md:my-4",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Categories"}),e.jsx("div",{className:"flex flex-col gap-2 mt-3",children:v.map(({id:s,value:t,label:r})=>e.jsxs("label",{htmlFor:s,className:"flex flex-row items-center justify-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"category",id:s,value:t,onChange:P})," ",r]},s))})]}),e.jsxs("div",{className:"px-4 my-10 md:my-4",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Ratings"}),e.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[e.jsx("div",{className:"flex justify-between mb-2",children:[1,2,3,4,5].map(s=>e.jsx("span",{className:"text-sm font-medium",children:s},s))}),e.jsx("label",{htmlFor:"rating",className:"flex flex-row items-center justify-start gap-2 cursor-pointer",children:e.jsx("input",{type:"range",name:"rating",id:"rating",defaultValue:1,step:1,min:1,max:5,className:"w-full max-w-sm",onChange:g})})]})]}),e.jsx("button",{type:"submit",className:"block bg-slate-900 text-white px-3 py-2 rounded-lg ml-4 text-xl tracking-wider",onClick:d,children:"Apply"})]})]})}k.propTypes={setFilterCriteria:m.func.isRequired,setSortPreference:m.func.isRequired,setRatingsPreference:m.func.isRequired};function X(){const{value:l,status:h}=J(t=>t.product),o=T(),{categoryname:u,productname:c}=K(),[w,C]=n.useState([]),[a,j]=n.useState(["Wired","Noise Cancelling","Wireless","Speaker"]);n.useEffect(()=>{a.length<=0&&j(["Wired","Noise Cancelling","Wireless","Speaker"])},[a]);const[g,P]=n.useState(!1),[d,b]=n.useState(""),[y,v]=n.useState(0),s=t=>{j(t),P(!0)};return n.useEffect(()=>{let t;g?t=a:t=u?[u]:["Wired","Noise Cancelling","Wireless","Speaker"];let r=l.filter(i=>t.includes(i.category));r=r.filter(i=>i.rating>=y),c&&(r=r.filter(i=>i.name.toLowerCase().includes(c.toLowerCase()))),d==="lowToHigh"?r=r.sort((i,x)=>{const f=i.originalPrice,N=f-f*(i.discountPercentage/100),p=x.originalPrice,F=p-p*(x.discountPercentage/100);return N-F}):d==="highToLow"&&(r=r.sort((i,x)=>{const f=i.originalPrice,N=f-f*(i.discountPercentage/100),p=x.originalPrice;return p-p*(x.discountPercentage/100)-N})),C(r)},[u,c,l,a,d,y]),n.useEffect(()=>{l&&l.length<=0&&o(M())},[]),h===A.LOADING?e.jsx(Q,{}):h===A.ERROR?e.jsx("p",{className:"text-xl md:text-3xl text-center my-8 text-red-500",children:"Something went wrong!!!"}):e.jsxs("div",{className:"flex flex-row flex-wrap justify-start items-start relative",children:[e.jsx(k,{setFilterCriteria:s,setSortPreference:b,setRatingsPreference:v}),e.jsx("div",{className:"flex flex-row justify-start items-center flex-wrap gap-4 mx-8 my-4 mb-24 lg:ml-72 lg:mr-64",children:w.length<=0?e.jsx("p",{className:"text-xl md:text-3xl text-center my-8",children:"No items found for that..."}):w.map(t=>e.jsx(W,{productDetails:t},t.name))})]})}function Z(){return e.jsx(X,{})}export{Z as default};
